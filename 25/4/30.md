# 25/04/30 TIL CS 스터디
## 네트워크 분류

- 책 2.1.3 참고

- 네트워크는 규모를 기반으로 분류할 수 있음
- 사무실과 개인적으로 소유 가능한 규모인 LAN(Local Area Network)
- 서울시 등 시 정도의 규모인 MAN(Metropolitan Area Network)
- 세계 규모의 WAN(Wide Area Network)

### LAN

- 근거리 통신망을 의미
- 같은 건물이나 캠퍼스 같은 좁은 공간에서 운영됨
- 전송 속도가 빠르고 혼잡하지 않음

### MAN

- 대도시 지경 네트워크를 나타냄
- 도시 같은 넓은 지역에서 운영
- 전송 속도는 평균
- LAN보다는 더 많이 혼잡

### WAN

- 광역 네트워크를 의미
- 국가 또는 대륙 같은 더 넓은 지역에서 운영
- 전송 속도는 낮음
- MAN보다 더 혼잡

| 항목 | **LAN (근거리 통신망)** | **MAN (도시권 통신망)** | **WAN (광역 통신망)** |
| --- | --- | --- | --- |
| **의미** | 한 건물 또는 가까운 거리의 네트워크 | 도시 단위의 네트워크 | 국가/대륙 단위의 광범위한 네트워크 |
| **범위** | 수 m ~ 수 km (건물, 사무실, 학교 등) | 수 km ~ 수십 km (도시 전체) | 수백 km 이상 (국가 간, 대륙 간) |
| **속도** | 매우 빠름 (100Mbps~10Gbps 이상) | 보통 빠름 (수십~수백 Mbps) | 상대적으로 느림 (수 Mbps ~ 수 Gbps) |
| **소유** | **개인/기업이 직접 구축·관리** | 통신 사업자 또는 공공기관이 운영 | **통신 사업자, 정부, 국제 기관** 등이 운영 |
| **설치비용** | 낮음 | 중간 | 매우 높음 |
| **사용 예시** | 회사 내부 네트워크, 학교 전산망 | 시청, 대학 캠퍼스 간 연결 | 인터넷, 국제 기업 네트워크 |

## 네트워크 성능 분석 명령어

- 책 2.1.4 참고

애플리케이션 코드상에는 전혀 문제가 없는데 사용자가 서비스로부터 데이터를 가져오지 못하는 상황이 발생되기도 한다. 이는 네트워크 병목 현상일 가능성이 있고, 네트워크 병목 현상의 주된 원인은 다음과 같다

- 네트워크 대역폭
- 네트워크 토폴로지
- 서버 CPU, 메모리 사용량
- 비횽율적인 네트워크 구성

이때는 네트워크 관련 테스트와 네트워크와 무관한 테스트를 통해 ‘네트워크로부터 발생한 문제점’인 것을 확인 후 네트워크 성능 분석을 해봐야 한다. 

### ping(Packet INternet Groper)

- 네트워크 상태를 확인하려는 대상 노드를 향해 일정 크기의 패킷을 전송하는 명령어
- 해당 노드의 패킷 수신 상태와 도달하기까지 시간 등을 알 수 있고, 해당 노드까지 네트워크가 잘 연결되어 있는지 확인할 수 있음
- TCP/IP 프로토콜 중에 ICMP 프로토콜을 통해 동작
- ICMP 프로토콜을 지원하지 않는 기기를 대상으로는 실행할 수 없거나 네트워크 정책상 ICMP나 traceroute를 차단하는 대상의 경우 ping 테스팅 불가능

![Image](https://github.com/user-attachments/assets/8607ca00-028c-4bb6-8f23-6f0088136ae2)

- 위 그림은 ping [www.google.com](http://www.google.com) -n 12 라는 명령어를 구동한 모습
- -n 12를 넣어 12번의 패킷을 보내고 12번의 패킷을 받는 모습

### netstat

- 접속되어 있는 서비스들의 네트워크 상태를 표시하는데 사용
- 네트워크 접속, 라우팅 테이블, 네트워크 프로토콜 등 리스트를 보여줌
- 주로 서비스의 포트가 열려 있는지를 확인할 때 사용

![Image](https://github.com/user-attachments/assets/a6c532e6-0883-40c8-ba01-851724101668)

- 위 그림을 통해 지금 접속해 잇는 사이트 등에 관한 네트워크 상태 리스트를 볼 수 있는 것을 확인할 수 있음

### nslookup

- DNS 에 관련된 내용을 확인하기 위해 쓰는 명령어
- 특정 도메인에 매핑된 IP를 확인하기 위해 사용

![Image](https://github.com/user-attachments/assets/1fffb51e-5a45-4319-87ec-184e267c79dc)

- 위 사진은 google.com의 DNS를 확인하는 모습

### teacert

- 윈도우에서는 tracert이고, 리눅스에서는 traceroute라는 명령어로 구동
- 목적지 노드까지 네트워크 경로를 확인할 때 사용하는 명령어
- 목적지 노드까지 구간들 중 어느 구간에서 응답 시간이 느려지는지 등을 확인

![Image](https://github.com/user-attachments/assets/52909537-685e-4def-9e3c-dd0e0d4ce6d4)

- 그림은 구글 사이트에 도달하기까지의 경로 추적을 하는 모습

이외에도 ftp를 통해 대형 파일을 전송하여 테스팅하거나 tcpdump를 통해 노드로 오고 가는 패킷을 캡처하는 등의 명령어가 있으며 네트워크 분석 프로그램으로는 sireshark, netmon이 있다

## 네트워크 상태 확인 도구 정리표

| 명령어/도구 | 설명 | 주로 확인하는 것 | 특징 |
| --- | --- | --- | --- |
| **FTP** (File Transfer Protocol) | 파일을 네트워크로 **전송**하는 프로토콜/명령어 | 전송 속도, 연결 여부, 데이터 흐름 | 주로 파일 서버 연결 테스트 용도 |
| **tcpdump** | 네트워크에서 흐르는 **패킷을 실시간 캡처**하는 명령어 도구 | 패킷 내용, 목적지, 포트, 에러 여부 | 터미널 기반, **가볍고 강력** |
| **Wireshark** | **그래픽 기반의 패킷 분석 도구** | 모든 네트워크 트래픽, 프로토콜 분석, 문제 추적 | 시각적 분석에 뛰어남 (GUI 기반) |
| **Netmon** (Microsoft Network Monitor) | 윈도우 전용 네트워크 패킷 분석 도구 | TCP/UDP 흐름, 트래픽 양, 응답 지연 | 현재는 **Microsoft Message Analyzer로 대체**됨 |

---

## 각 도구 간단 예시

### 1. **FTP**

- 예: `ftp 192.168.0.10`
- 서버와 연결되면 로그인 → 파일 전송 테스트 가능
- 네트워크 연결 확인 + 전송 가능 여부 확인할 수 있음

---

### 2. **tcpdump**

```bash
bash
복사편집
sudo tcpdump -i eth0
```

- eth0 인터페이스로 들어오는 모든 패킷을 실시간 캡처
- 필터 조건 걸어서 특정 IP나 포트만 분석도 가능

---

### 3. **Wireshark**

- GUI 툴. 실행하면 실시간으로 패킷을 보여줌
- 클릭해서 HTTP, DNS, TCP, ICMP 등 **각 패킷 내용을 깊게 분석** 가능
- 필터 기능이 매우 강력 (`ip.addr == 192.168.0.1` 등)

---

### 4. **Netmon**

- 오래된 Windows용 툴로 현재는 **Wireshark로 거의 대체**
- Microsoft 환경에서 패킷 흐름 분석 가능

### TCP/IP 프로토콜

- 인터넷을 포함한 모든 네트워크 통신의 기본 규칙(약속)이자 데이터를 어떻게 나누고, 보내고, 받고 조립하고, 확인할지를 정한 체계
- TCP/IP는 단일 프로토콜이 아니라 여러 통신 프로토콜들이 계층별로 모여 있는 프로토콜 집합
- 네트워크 장비(컴퓨터, 라우터 등)가 서로 이해하고 통신할 수 있게 만들어주는 공통 언어 같은 것

## TCP/IP 구조 (4계층으로 나눠짐)

| 계층 | 설명 | 대표 프로토콜 |
| --- | --- | --- |
| **응용 계층** | 사용자 애플리케이션과 직접 연결 | HTTP, FTP, DNS, SMTP |
| **전송 계층** | 데이터를 **안전하게** 전달 | **TCP**, UDP |
| **인터넷 계층** | 목적지까지 **경로 지정** | **IP**, ICMP |
| **네트워크 접근 계층** | **실제 물리 전송** 담당 | Ethernet, Wi-Fi 등 |

### 이름 뜻

- **TCP**: Transmission Control Protocol
    
    → 데이터가 **정확하고 순서대로 도착하도록** 보장 (신뢰성 높음)
    
- **IP**: Internet Protocol
    
    → 데이터가 **어디로 가야 하는지(주소 지정)** 담당
    

### ICMP(Internet Control Message Protocol)

→ 네트워크 상태나 에러 정보를 전달하는데 사용되는 프로토콜

- 데이터를 전송하지 않음
- 대신, 네트워크 경로 중 문제가 생겼을 때 신호를 보내주는 역할
- 예시:
    - 목적지 도달 불가
    - TTL 초과
    - 포트 없음
    - 네트워크 혼잡
    - 등등의 상황에서 ICMP가 알려줌

사용 예시

- ping 명령어를 입력
    
    → 컴퓨터가 ICMP Echo Request 패킷을 보냄
    
    → 상대가 살아있다면 ICMP Echo Reply로 응답
    
- 목적지에 도달 못하면?
    
    → 라우터가 ICMP Destination Unreachable을 보내서 알려줌
    
- TTL(TIme To Live)이 0이 되면?
    
    → 중간 장비가 ICMP Time Exceeded를 보냄
    

| 특징 | 내용 |
| --- | --- |
| 전송 데이터 없음 | 실제 데이터를 전달하진 않음 |
| 신호만 보냄 | 에러 알림, 응답 확인 등 메시지 역할만 수행 |
| TCP/UDP가 아님 | **IP 계층 바로 위**에서 작동함 (→ 전송 계층 아님) |
| ping/traceroute에 사용됨 | 진단 도구들이 ICMP 기반 |

### 보안 이슈

- ICMP는 가볍고 유용
- 하지만 악의적으로 **ping flood, smurf attack**에 쓰일 수 있음
- **서버/방화벽이 ICMP 요청을 차단**하는 경우도 많음

## 네트워크 프로토콜 표준화

책 2.1.5 참고

- 네트워크 프로토콜이란 다른 장치들끼리 데이터를 주고받기 위해 설정된 공통된 인터페이스를 말함
- 이러한 프로토콜을 기업이나 개인이 발표해서 정하는 것이 아니라 IEEE 또는 IETF라는 표준화 단체가 정함

![Image](https://github.com/user-attachments/assets/4dab88ee-6deb-4941-a88d-b5c94b2be05f)

- IEEE802.3은 유선 LAN 프로토콜로, 유선으로 LAN을 구출할 때 쓰이는 프로토콜
- 이를 통해 만든 기업이 다른 장치라도 서로 데이터를 수신할 수 있음
- 예를 들어 웹을 접속할 때 쓰이는 HTTP가 있다
- ‘서로 약속된’ 인터페이스인 HTTP라는 프로토콜을 통해 노드들은 웹 서비스를 기반으로 데이터를 주고받을 수 있다.